<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AWS Cheatsheet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0b1120;
      --bg-elevated: #111827;
      --bg-sidebar: #020617;
      --border: #1f2937;
      --border-soft: #273549;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #0972d3;
      --accent-soft: rgba(9, 114, 211, 0.15);
      --accent-strong-soft: rgba(56, 189, 248, 0.18);
      --danger: #f97373;
      --radius-card: 8px;
      --radius-pill: 999px;
      --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.45);
      --drawer-width: 420px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-shell {
      display: flex;
      flex-direction: column;
      height: 100vh;
      max-height: 100vh;
    }

    header.app-header {
      padding: 12px 20px 10px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(to right, #020617, #020617 40%, #020617 100%);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .app-title {
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #f9fafb;
    }

    .app-subtitle {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .mode-toggle {
      display: inline-flex;
      border-radius: var(--radius-pill);
      padding: 3px;
      background: #020617;
      border: 1px solid var(--border);
      gap: 2px;
    }

    .mode-btn {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.16s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .mode-btn span.icon {
      font-size: 0.9rem;
    }

    .mode-btn.active {
      background: var(--accent-soft);
      color: var(--text);
    }

    .app-main {
      flex: 1;
      display: flex;
      min-height: 0;
    }

    .sidebar {
      width: 220px;
      min-width: 200px;
      max-width: 260px;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border);
      padding: 12px 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .sidebar-section-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-bottom: 4px;
      padding: 0 6px;
    }

    .sidebar-mode-list,
    .sidebar-filter-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .sidebar-mode-btn {
      border-radius: 6px;
      border: 1px solid transparent;
      padding: 6px 8px;
      font-size: 0.8rem;
      color: var(--muted);
      background: transparent;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
    }

    .sidebar-mode-btn svg {
      flex-shrink: 0;
    }

    .sidebar-mode-btn:hover {
      background: #020617;
      border-color: var(--border);
      color: var(--text);
    }

    .sidebar-mode-btn.active {
      background: rgba(15, 23, 42, 0.9);
      border-color: var(--accent);
      color: var(--text);
    }

    .sidebar-filter-pill {
      border-radius: var(--radius-pill);
      border: 1px solid var(--border);
      padding: 4px 8px;
      font-size: 0.75rem;
      color: var(--muted);
      background: transparent;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.16s ease;
    }

    .sidebar-filter-pill.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--text);
    }

    .sidebar-footer {
      margin-top: auto;
      padding: 6px 6px 4px;
      border-top: 1px solid var(--border);
      font-size: 0.7rem;
      color: var(--muted);
    }

    .content-area {
      flex: 1;
      display: flex;
      min-width: 0;
      position: relative;
      overflow: hidden;
    }

    .grid-wrapper {
      flex: 1;
      padding: 14px 16px 16px;
      overflow: auto;
      transition: margin-right 0.2s ease;
    }

    .grid-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 10px;
    }

    .grid-title {
      font-size: 0.95rem;
      font-weight: 500;
      color: #f9fafb;
    }

    .grid-subtitle {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .grid-hint {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 10px;
    }

    .pattern-card {
      background: var(--bg-elevated);
      border-radius: var(--radius-card);
      border: 1px solid var(--border);
      padding: 10px 10px 9px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.16s ease;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .pattern-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, var(--accent-strong-soft), transparent 55%);
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .pattern-card:hover::before {
      opacity: 1;
    }

    .pattern-card:hover {
      border-color: rgba(56, 189, 248, 0.7);
      box-shadow: var(--shadow-soft);
      transform: translateY(-1px);
    }

    .pattern-card.active {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
    }

    .pattern-header {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pattern-icon {
      width: 26px;
      height: 26px;
      border-radius: 6px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .pattern-name {
      font-size: 0.9rem;
      font-weight: 500;
    }

    .pattern-tagline {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .pattern-meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 2px;
    }

    .badge {
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-soft);
      padding: 2px 7px;
      font-size: 0.7rem;
      color: var(--muted);
    }

    .badge.level {
      border-color: rgba(56, 189, 248, 0.7);
      color: var(--accent);
    }

    .badge.cost {
      border-color: rgba(52, 211, 153, 0.7);
      color: #6ee7b7;
    }

    .badge.focus {
      border-color: rgba(251, 191, 36, 0.7);
      color: #facc15;
    }

    .drawer {
      position: relative;
      width: 0;
      max-width: var(--drawer-width);
      border-left: 1px solid var(--border);
      background: #020617;
      transition: width 0.2s ease;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .drawer.open {
      width: var(--drawer-width);
    }

    .drawer-inner {
      height: 100%;
      display: flex;
      flex-direction: column;
      background: var(--bg-elevated);
    }

    .drawer-header {
      padding: 10px 12px 8px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .drawer-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .drawer-title {
      font-size: 0.95rem;
      font-weight: 500;
      color: #f9fafb;
    }

    .drawer-subtitle {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .drawer-close-btn {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--muted);
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.16s ease;
      flex-shrink: 0;
    }

    .drawer-close-btn:hover {
      border-color: var(--accent);
      color: var(--text);
      background: #020617;
    }

    .drawer-body {
      padding: 10px 12px 12px;
      overflow: auto;
      font-size: 0.8rem;
    }

    .drawer-section-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin: 8px 0 4px;
    }

    .drawer-text {
      color: var(--muted);
      margin-bottom: 6px;
    }

    .service-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .service-chip {
      font-size: 0.75rem;
      padding: 4px 8px;
      border-radius: var(--radius-pill);
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid var(--border-soft);
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .service-chip span {
      color: var(--text);
      font-weight: 500;
    }

    .drawer-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .drawer-list li {
      margin-bottom: 4px;
    }

    .drawer-list li span {
      color: var(--text);
    }

    .drawer-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-soft);
      padding: 3px 8px;
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 4px;
    }

    .drawer-pill strong {
      color: var(--text);
      font-weight: 500;
    }

    .empty-state {
      font-size: 0.78rem;
      color: var(--muted);
      margin-top: 4px;
    }

    @media (max-width: 900px) {
      .sidebar {
        display: none;
      }
      .grid-wrapper {
        padding: 12px 10px 14px;
      }
    }

    @media (max-width: 720px) {
      header.app-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      .grid-header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  
.pattern-card:focus {
  outline: 2px solid var(--accent);
  outline-offset: 4px;
}
.drawer-close-btn:focus {
  outline: 2px solid var(--accent);
}
.sidebar-mode-btn:focus {
  outline: 2px solid rgba(9,114,211,0.4);
}

</style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="app-title-block">
        <div class="app-title">Amazon Web Services Cheatsheet</div>
        <div class="app-subtitle">
          Leverage perpetually free service offerings with AWS to build and run core infrastructure with minimal upfront cost. 

        </div>
      </div>
      <div class="mode-toggle" id="top-mode-toggle">
        <button class="mode-btn active" data-mode="turnkey">
          <span class="icon">âš¡</span>
          <span>Turnkey</span>
        </button>
        <button class="mode-btn" data-mode="startup">
          <span class="icon">ðŸš€</span>
          <span>Startup</span>
        </button>
        <button class="mode-btn" data-mode="service">
          <span class="icon">ðŸ§©</span>
          <span>By Service</span>
        </button>
      </div>
    </header>

    <div class="app-main">
      <aside class="sidebar">
        <div>
          <div class="sidebar-section-title">Modes</div>
          <div class="sidebar-mode-list" id="sidebar-mode-list">
            </div>
        </div>

        <div>
          <div class="sidebar-section-title">Filters</div>
          <div class="sidebar-filter-list" id="sidebar-filter-list">
            <button class="sidebar-filter-pill active" data-filter="all">
              <span>All</span>
            </button>
            <button class="sidebar-filter-pill" data-filter="compute">
              <span>Compute</span>
            </button>
            <button class="sidebar-filter-pill" data-filter="storage">
              <span>Storage</span>
            </button>
            <button class="sidebar-filter-pill" data-filter="networking">
              <span>Networking</span>
            </button>
            <button class="sidebar-filter-pill" data-filter="serverless">
              <span>Serverless</span>
            </button>
          </div>
        </div>

        <div class="sidebar-footer">
          Designed to feel like an AWS Console-native tool, but focused on individuals and early-stage builders.
        </div>
      </aside>

      <div class="content-area">
        <div class="grid-wrapper" id="grid-wrapper">
          <div class="grid-header">
            <div>
              <div class="grid-title" id="grid-title"></div>
              <div class="grid-subtitle" id="grid-subtitle"></div>
            </div>
          </div>
          <div class="grid-hint" id="grid-hint"></div>
          <div class="card-grid" id="card-grid"></div>
        </div>

        <aside class="drawer" id="drawer">
          <div class="drawer-inner">
            <div class="drawer-header">
              <div class="drawer-title-block">
                <div class="drawer-title" id="drawer-title"></div>
                <div class="drawer-subtitle" id="drawer-subtitle"></div>
              </div>
              <button class="drawer-close-btn" id="drawer-close-btn" aria-label="Close details">
                âœ•
              </button>
            </div>
            <div class="drawer-body" id="drawer-body"></div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    // ---------- ICONS (AWS-style minimalist SVGs) ----------
    const Icons = {
      compute: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <rect x="3" y="3" width="10" height="10" rx="2" ry="2" fill="none" stroke="#60a5fa" stroke-width="1.2"/>
          <rect x="5" y="5" width="6" height="6" rx="1" ry="1" fill="none" stroke="#93c5fd" stroke-width="1"/>
        </svg>
      `,
      storage: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <ellipse cx="8" cy="4" rx="4.5" ry="2.2" fill="none" stroke="#38bdf8" stroke-width="1.1"/>
          <path d="M3.5 4v4c0 1.2 2 2.2 4.5 2.2s4.5-1 4.5-2.2V4" fill="none" stroke="#38bdf8" stroke-width="1.1"/>
          <path d="M3.5 8v4c0 1.2 2 2.2 4.5 2.2s4.5-1 4.5-2.2V8" fill="none" stroke="#7dd3fc" stroke-width="1"/>
        </svg>
      `,
      networking: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <circle cx="4" cy="4" r="1.6" fill="none" stroke="#a5b4fc" stroke-width="1.1"/>
          <circle cx="12" cy="4" r="1.6" fill="none" stroke="#a5b4fc" stroke-width="1.1"/>
          <circle cx="8" cy="12" r="1.6" fill="none" stroke="#a5b4fc" stroke-width="1.1"/>
          <path d="M5.4 4.7L6.8 5.9M10.6 4.7L9.2 5.9M8 10.4V6.6" fill="none" stroke="#6366f1" stroke-width="1"/>
        </svg>
      `,
      database: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <ellipse cx="8" cy="3.8" rx="3.8" ry="1.8" fill="none" stroke="#fbbf24" stroke-width="1.1"/>
          <path d="M4.2 3.8v3.2c0 1 1.7 1.8 3.8 1.8s3.8-.8 3.8-1.8V3.8" fill="none" stroke="#fbbf24" stroke-width="1.1"/>
          <path d="M4.2 7v3.2c0 1 1.7 1.8 3.8 1.8s3.8-.8 3.8-1.8V7" fill="none" stroke="#fde68a" stroke-width="1"/>
        </svg>
      `,
      serverless: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <path d="M7 2.5L4 8h3l-1 5.5L12 7H9l1-4.5z" fill="none" stroke="#f97316" stroke-width="1.1" stroke-linejoin="round"/>
        </svg>
      `,
      container: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <rect x="3" y="4" width="10" height="8" rx="1.5" ry="1.5" fill="none" stroke="#22c55e" stroke-width="1.1"/>
          <path d="M6 4v8M10 4v8" fill="none" stroke="#4ade80" stroke-width="1"/>
        </svg>
      `,
      general: `
        <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><title>Icon</title>
          <rect x="3" y="3" width="10" height="10" rx="2" ry="2" fill="none" stroke="#9ca3af" stroke-width="1.1"/>
          <path d="M5 8h6" fill="none" stroke="#e5e7eb" stroke-width="1"/>
        </svg>
      `
    };

    // ---------- DATA MODEL ----------

    const patternsTurnkey = [
      {
        id: "tk-website",
        name: "Launch a Website",
        tagline: "Fast, simple hosting with minimal decisions.",
        level: "Beginner",
        cost: "Predictable, low-cost",
        focus: "Turnkey hosting",
        icon: "general",
        description:
          "Use Amazon Lightsail to launch a website quickly with bundled compute, networking, and optional database. Ideal for marketing sites, blogs, or small business pages.",
        whyBest:
          "Lightsail hides most of the AWS complexity while still running on AWS infrastructure. You get predictable pricing, simple management, and an easy path to grow later.",
        services: [
          { id: "lightsail", name: "Lightsail", role: "All-in-one VPS-style hosting with bundles." },
          { id: "route53", name: "Route 53", role: "Optional: custom domain and DNS routing." },
          { id: "cloudfront", name: "CloudFront", role: "Optional: CDN and SSL acceleration." }
        ],
        costNotes:
          "Lightsail instances start at a few dollars per month. Route 53 and CloudFront add small incremental costs if used.",
        complexityNotes:
          "You manage a single Lightsail instance instead of wiring VPC, EC2, ALB, and RDS yourself."
      },
      {
        id: "tk-static-site",
        name: "Host a Static Site",
        tagline: "Cheapest, most durable way to be online.",
        level: "Beginner",
        cost: "Free-tier friendly",
        focus: "Static content",
        icon: "storage",
        description:
          "Use S3 and CloudFront to host static HTML, CSS, JS, and media. Perfect for portfolios, docs, landing pages, and product sites.",
        whyBest:
          "This pattern is extremely low maintenance, highly available, and very cheap. You donâ€™t manage servers at all.",
        services: [
          { id: "s3", name: "S3", role: "Stores and serves your static files." },
          { id: "cloudfront", name: "CloudFront", role: "CDN, HTTPS, and global performance." },
          { id: "route53", name: "Route 53", role: "Optional: custom domain and DNS." }
        ],
        costNotes:
          "Often fits comfortably in the AWS Free Tier for small sites. You mainly pay for storage and data transfer.",
        complexityNotes:
          "No servers, no OS patching, no scaling logic. You focus on your content and front-end code."
      },
      {
        id: "tk-app",
        name: "Deploy an App",
        tagline: "Run a real app without managing infra.",
        level: "Intermediate",
        cost: "Low to moderate",
        focus: "Managed app hosting",
        icon: "compute",
        description:
          "Use AWS App Runner or Lightsail to deploy a web application from code or containers. Ideal for SaaS MVPs, dashboards, and APIs.",
        whyBest:
          "You get autoscaling, HTTPS, and deployment from source or container without building out full ECS or EC2 infrastructure.",
        services: [
          { id: "apprunner", name: "App Runner", role: "Managed app platform with autoscaling." },
          { id: "rds", name: "RDS", role: "Optional: managed relational database backend." },
          { id: "s3", name: "S3", role: "Optional: asset and file storage." }
        ],
        costNotes:
          "You pay for compute and requests. App Runner is more than Lightsail but cheaper than overbuilt infra.",
        complexityNotes:
          "You focus on your app and deployment pipeline, not on VPC wiring, load balancers, or capacity planning."
      },
      {
        id: "tk-api",
        name: "Run an API",
        tagline: "Serverless backend with minimal overhead.",
        level: "Intermediate",
        cost: "Pay-per-use",
        focus: "Serverless API",
        icon: "serverless",
        description:
          "Use Lambda and API Gateway to expose a simple API without managing servers. Great for side projects, webhooks, and lightweight backends.",
        whyBest:
          "You only pay when your API is called, and you donâ€™t manage any servers. It scales automatically with traffic.",
        services: [
          { id: "lambda", name: "Lambda", role: "Runs your backend code on demand." },
          { id: "apigw", name: "API Gateway", role: "Front door for your HTTP API." },
          { id: "cloudwatch", name: "CloudWatch", role: "Logs and basic monitoring." }
        ],
        costNotes:
          "Very cheap at low traffic levels. You pay per request and compute time, often within free-tier limits.",
        complexityNotes:
          "You design functions and endpoints instead of servers and networks. Great for learning event-driven patterns."
      },
      {
        id: "tk-automation",
        name: "Automate a Job",
        tagline: "Cron-like tasks without a server.",
        level: "Intermediate",
        cost: "Low-cost",
        focus: "Automation",
        icon: "serverless",
        description:
          "Use EventBridge and Lambda to run scheduled jobs: backups, cleanups, notifications, or data syncs.",
        whyBest:
          "You donâ€™t need a dedicated server just to run cron. AWS handles scheduling and execution for you.",
        services: [
          { id: "eventbridge", name: "EventBridge", role: "Schedules and triggers your jobs." },
          { id: "lambda", name: "Lambda", role: "Executes your job logic." },
          { id: "cloudwatch", name: "CloudWatch", role: "Logs and alarms for failures." }
        ],
        costNotes:
          "You pay for invocations and small EventBridge charges. For light jobs, costs are usually negligible.",
        complexityNotes:
          "You think in terms of tasks and schedules, not servers and daemons. Easy to extend over time."
      },
      {
        id: "tk-store-data",
        name: "Store Data",
        tagline: "Durable, cheap storage for anything.",
        level: "Beginner",
        cost: "Free-tier friendly",
        focus: "Data storage",
        icon: "storage",
        description:
          "Use S3 as your central place for files, exports, logs, and backups. It becomes your personal or startup data lake.",
        whyBest:
          "S3 is the backbone of most AWS data architectures. Starting here sets you up for analytics later.",
        services: [
          { id: "s3", name: "S3", role: "Durable object storage for all your data." }
        ],
        costNotes:
          "You pay for storage and data transfer. For small projects, costs are typically very low.",
        complexityNotes:
          "No servers, no databases to manage. Just buckets, folders, and lifecycle rules if you want them."
      },
      {
        id: "tk-container",
        name: "Deploy a Container",
        tagline: "Run containers without managing clusters.",
        level: "Intermediate",
        cost: "Usage-based",
        focus: "Containers",
        icon: "container",
        description:
          "Use App Runner to deploy a containerized app directly from a registry or repo. Ideal if you already use Docker.",
        whyBest:
          "You avoid managing ECS clusters or Kubernetes, but still get container-based deployment and scaling.",
        services: [
          { id: "apprunner", name: "App Runner", role: "Runs your container with autoscaling." },
          { id: "ecr", name: "ECR (optional)", role: "Container image registry if you need one." }
        ],
        costNotes:
          "You pay for compute and requests. Good for apps that need more control than pure serverless.",
        complexityNotes:
          "You focus on your container image and app behavior, not on orchestrators or node groups."
      },
      {
        id: "tk-database",
        name: "Add a Database",
        tagline: "Managed SQL without running your own DB server.",
        level: "Intermediate",
        cost: "Moderate",
        focus: "Data layer",
        icon: "database",
        description:
          "Use RDS to add a managed relational database to your app. Ideal for SaaS, internal tools, and anything that needs SQL.",
        whyBest:
          "RDS handles backups, patching, and basic high availability so you donâ€™t have to babysit a database server.",
        services: [
          { id: "rds", name: "RDS", role: "Managed relational database (PostgreSQL, MySQL, etc.)." },
          { id: "cloudwatch", name: "CloudWatch", role: "Monitoring and basic alarms." }
        ],
        costNotes:
          "More expensive than serverless storage, but appropriate for serious apps. You pay for instance size and storage.",
        complexityNotes:
          "You still design schemas and queries, but you donâ€™t manage OS-level database operations."
      }
    ];

    const patternsStartup = [
      {
        id: "su-saas",
        name: "SaaS Backend",
        tagline: "Serverless-first backend for multi-tenant apps.",
        level: "Intermediate",
        cost: "Pay-per-use",
        focus: "SaaS architecture",
        icon: "serverless",
        description:
          "Build a SaaS backend using API Gateway, Lambda, and DynamoDB, with Cognito for auth. Ideal for early-stage SaaS products that need to scale without heavy infra.",
        whyBest:
          "You get fine-grained scaling, low idle cost, and a modern architecture that can grow with your customer base.",
        services: [
          { id: "apigw", name: "API Gateway", role: "Public API front door." },
          { id: "lambda", name: "Lambda", role: "Business logic and integrations." },
          { id: "dynamodb", name: "DynamoDB", role: "Serverless NoSQL data store." },
          { id: "cognito", name: "Cognito", role: "User sign-up, sign-in, and auth." },
          { id: "s3", name: "S3", role: "Asset and file storage." }
        ],
        scalingNotes:
          "Scales automatically with traffic. You design for multi-tenancy and throughput, not for servers.",
        costNotes:
          "Excellent for low to medium traffic. Costs grow with usage, not with idle capacity.",
        learningValue:
          "Teaches serverless design, event-driven patterns, and modern SaaS architecture."
      },
      {
        id: "su-webapp",
        name: "Scalable Web App",
        tagline: "Classic 3-tier app on AWS primitives.",
        level: "Advanced",
        cost: "Depends on usage",
        focus: "Full control",
        icon: "compute",
        description:
          "Use VPC, ALB, Auto Scaling groups of EC2, and RDS to build a traditional 3-tier web application.",
        whyBest:
          "This mirrors what many production workloads run today. You get deep control over networking, scaling, and performance.",
        services: [
          { id: "vpc", name: "VPC", role: "Isolated network and security boundaries." },
          { id: "alb", name: "Application Load Balancer", role: "Distributes traffic across instances." },
          { id: "ec2", name: "EC2 + Auto Scaling", role: "App servers that scale with load." },
          { id: "rds", name: "RDS", role: "Managed relational database." },
          { id: "cloudwatch", name: "CloudWatch", role: "Metrics, logs, and alarms." }
        ],
        scalingNotes:
          "You control scaling policies and instance types. Great for performance-sensitive or legacy-compatible workloads.",
        costNotes:
          "You pay for always-on capacity. Right-size instances and use Auto Scaling to control costs.",
        learningValue:
          "Teaches core AWS networking, load balancing, and capacity planning."
      },
      {
        id: "su-data-pipeline",
        name: "Data Pipeline",
        tagline: "Ingest, transform, and query data on AWS.",
        level: "Advanced",
        cost: "Usage-based",
        focus: "Data & analytics",
        icon: "storage",
        description:
          "Use S3 as your data lake, Glue for cataloging and ETL, and Athena for serverless SQL queries.",
        whyBest:
          "This pattern is the backbone of many analytics stacks. Itâ€™s flexible, scalable, and pay-per-use.",
        services: [
          { id: "s3", name: "S3", role: "Raw and curated data storage." },
          { id: "glue", name: "Glue", role: "ETL jobs and Data Catalog." },
          { id: "athena", name: "Athena", role: "Serverless SQL over S3." },
          { id: "eventbridge", name: "EventBridge", role: "Optional: event-driven orchestration." }
        ],
        scalingNotes:
          "Scales with data volume and query load. You donâ€™t manage servers, but you design partitions and schemas.",
        costNotes:
          "You pay for storage, ETL runs, and queries. Good hygiene (partitioning, compression) keeps costs in check.",
        learningValue:
          "Teaches modern data lake patterns and serverless analytics."
      },
      {
        id: "su-ml",
        name: "ML/AI Workflow",
        tagline: "Train and serve models on AWS.",
        level: "Advanced",
        cost: "Higher, usage-based",
        focus: "Machine learning",
        icon: "compute",
        description:
          "Use S3 for datasets, SageMaker for training and hosting, and API Gateway + Lambda for serving predictions.",
        whyBest:
          "You get managed infrastructure for training and deployment, with flexible integration into your app.",
        services: [
          { id: "s3", name: "S3", role: "Stores training data and model artifacts." },
          { id: "sagemaker", name: "SageMaker", role: "Managed training and model hosting." },
          { id: "lambda", name: "Lambda", role: "Glue code and lightweight inference." },
          { id: "apigw", name: "API Gateway", role: "Public endpoint for predictions." }
        ],
        scalingNotes:
          "You scale training jobs and endpoints based on workload. SageMaker handles much of the heavy lifting.",
        costNotes:
          "Training and hosting can be expensive; use spot training and right-sized instances where possible.",
        learningValue:
          "Teaches end-to-end ML lifecycle on AWS, from data to deployment."
      },
      {
        id: "su-event",
        name: "Event-Driven Architecture",
        tagline: "Loosely coupled services reacting to events.",
        level: "Advanced",
        cost: "Usage-based",
        focus: "Events & integration",
        icon: "networking",
        description:
          "Use EventBridge, Lambda, and SQS to build systems that react to events instead of polling.",
        whyBest:
          "This pattern scales well and keeps services decoupled. Great for complex backends and integrations.",
        services: [
          { id: "eventbridge", name: "EventBridge", role: "Central event bus and routing." },
          { id: "lambda", name: "Lambda", role: "Event handlers and processors." },
          { id: "sqs", name: "SQS", role: "Queues for buffering and decoupling." },
          { id: "s3", name: "S3", role: "Optional: event sources and sinks." }
        ],
        scalingNotes:
          "Scales naturally with event volume. You design for idempotency and eventual consistency.",
        costNotes:
          "You pay per event, invocation, and message. Efficient for spiky or asynchronous workloads.",
        learningValue:
          "Teaches event-driven design, decoupling, and resilient architectures."
      },
      {
        id: "su-multi-tier",
        name: "Multi-Tier App",
        tagline: "Front-end, API, and data layers separated.",
        level: "Intermediate",
        cost: "Moderate",
        focus: "Layered architecture",
        icon: "general",
        description:
          "Use CloudFront + S3 for front-end, API Gateway + Lambda for backend, and DynamoDB or RDS for data.",
        whyBest:
          "You get a clean separation of concerns and can scale each tier independently.",
        services: [
          { id: "cloudfront", name: "CloudFront", role: "CDN and HTTPS for the front-end." },
          { id: "s3", name: "S3", role: "Static front-end hosting." },
          { id: "apigw", name: "API Gateway", role: "API front door." },
          { id: "lambda", name: "Lambda", role: "Backend logic." },
          { id: "dynamodb", name: "DynamoDB / RDS", role: "Application data store." }
        ],
        scalingNotes:
          "Front-end, API, and data can scale independently. Great for modern SPAs and mobile backends.",
        costNotes:
          "Costs are mostly usage-based. You can start small and grow as traffic increases.",
        learningValue:
          "Teaches layered architecture and how front-end and backend interact on AWS."
      }
    ];

    const servicesCatalog = [
      {
        id: "s3",
        name: "Amazon S3",
        type: "Storage",
        description: "Object storage for files, backups, static sites, and data lakes.",
        bestFor: [
          "Hosting static websites and assets",
          "Storing personal or project data cheaply",
          "Building a simple data lake"
        ],
        individualIdeas: [
          "Host your portfolio or docs as a static site.",
          "Centralize exports from tools (Stripe, analytics, logs).",
          "Version important files and backups."
        ]
      },
      {
        id: "cloudfront",
        name: "Amazon CloudFront",
        type: "Networking / CDN",
        description: "Content delivery network that caches content close to users.",
        bestFor: [
          "Speeding up static sites and media",
          "Adding HTTPS easily to S3-hosted content"
        ],
        individualIdeas: [
          "Put CloudFront in front of your S3 site for global performance.",
          "Serve images and downloads faster for your side project."
        ]
      },
      {
        id: "route53",
        name: "Amazon Route 53",
        type: "DNS",
        description: "DNS and domain registration service.",
        bestFor: [
          "Managing DNS for your domains",
          "Routing traffic to S3, CloudFront, or EC2"
        ],
        individualIdeas: [
          "Point your custom domain to your S3 or CloudFront site.",
          "Use health checks to fail over between endpoints."
        ]
      },
      {
        id: "lightsail",
        name: "Amazon Lightsail",
        type: "Compute / Simplified",
        description: "Simplified VPS-style hosting with predictable pricing.",
        bestFor: [
          "Simple websites and apps",
          "People who want a straightforward VPS experience"
        ],
        individualIdeas: [
          "Host a WordPress site or simple app.",
          "Use it as a stepping stone before full VPC/EC2 setups."
        ]
      },
      {
        id: "apprunner",
        name: "AWS App Runner",
        type: "Compute / Managed",
        description: "Run web apps and APIs from code or containers without managing infrastructure.",
        bestFor: [
          "Containerized apps without cluster management",
          "Simple autoscaling web services"
        ],
        individualIdeas: [
          "Deploy a containerized side project directly from a repo.",
          "Run a backend service with minimal infra overhead."
        ]
      },
      {
        id: "lambda",
        name: "AWS Lambda",
        type: "Compute / Serverless",
        description: "Run code without managing servers, billed per invocation and duration.",
        bestFor: [
          "APIs and webhooks",
          "Cron jobs and automation",
          "Glue code between services"
        ],
        individualIdeas: [
          "Run a daily cleanup or backup job.",
          "Build a tiny API for a side project.",
          "React to S3 uploads or events automatically."
        ]
      },
      {
        id: "apigw",
        name: "Amazon API Gateway",
        type: "Networking / API",
        description: "Front door for APIs, often paired with Lambda.",
        bestFor: [
          "Public or private HTTP APIs",
          "Serverless backends"
        ],
        individualIdeas: [
          "Expose a Lambda function as a REST or HTTP API.",
          "Create a lightweight backend for a SPA or mobile app."
        ]
      },
      {
        id: "cloudwatch",
        name: "Amazon CloudWatch",
        type: "Monitoring",
        description: "Metrics, logs, and alarms for AWS resources and applications.",
        bestFor: [
          "Understanding what your workloads are doing",
          "Alerting on errors or unusual behavior"
        ],
        individualIdeas: [
          "Set alarms on Lambda errors or EC2 CPU.",
          "Search logs when debugging your app."
        ]
      },
      {
        id: "vpc",
        name: "Amazon VPC",
        type: "Networking",
        description: "Isolated virtual network for your AWS resources.",
        bestFor: [
          "Running apps that need private networking",
          "Learning real-world cloud networking"
        ],
        individualIdeas: [
          "Deploy a small app in a private subnet with a public load balancer.",
          "Experiment with security groups and network ACLs."
        ]
      },
      {
        id: "ec2",
        name: "Amazon EC2",
        type: "Compute",
        description: "Virtual machines in the cloud with full control.",
        bestFor: [
          "Custom stacks and self-managed apps",
          "Learning Linux and server administration"
        ],
        individualIdeas: [
          "Run a personal VPS-style server.",
          "Host a custom app that needs full control."
        ]
      },
      {
        id: "rds",
        name: "Amazon RDS",
        type: "Database",
        description: "Managed relational databases like PostgreSQL and MySQL.",
        bestFor: [
          "Apps that need a reliable SQL database",
          "Offloading backups and patching"
        ],
        individualIdeas: [
          "Back your side project with a managed Postgres instance.",
          "Practice real-world database administration with guardrails."
        ]
      },
      {
        id: "alb",
        name: "Application Load Balancer",
        type: "Networking",
        description: "Distributes HTTP/HTTPS traffic across multiple targets.",
        bestFor: [
          "Scaling web apps across multiple instances",
          "Routing based on paths or hosts"
        ],
        individualIdeas: [
          "Front multiple services with one HTTPS endpoint.",
          "Experiment with blue/green style routing."
        ]
      },
      {
        id: "athena",
        name: "Amazon Athena",
        type: "Analytics",
        description: "Serverless SQL queries over data in S3.",
        bestFor: [
          "Ad-hoc analysis on files",
          "Data exploration without a database"
        ],
        individualIdeas: [
          "Query CSV exports from tools directly in S3.",
          "Explore logs or event data with SQL."
        ]
      },
      {
        id: "glue",
        name: "AWS Glue",
        type: "Data Integration",
        description: "ETL and Data Catalog for analytics workloads.",
        bestFor: [
          "Organizing schemas for analytics",
          "Running ETL jobs into curated datasets"
        ],
        individualIdeas: [
          "Keep track of table definitions for your S3 data.",
          "Experiment with basic ETL and cataloging."
        ]
      },
      {
        id: "eventbridge",
        name: "Amazon EventBridge",
        type: "Integration / Events",
        description: "Event bus and scheduler for connecting services and running jobs.",
        bestFor: [
          "Cron-like schedules",
          "Event-driven workflows"
        ],
        individualIdeas: [
          "Trigger Lambda functions on a schedule.",
          "React to SaaS events (where supported) in your own code."
        ]
      },
      {
        id: "batch",
        name: "AWS Batch",
        type: "Compute / Batch",
        description: "Orchestrates batch computing jobs at any scale.",
        bestFor: [
          "Large-scale, parallelizable workloads",
          "Jobs that can tolerate interruptions with Spot"
        ],
        individualIdeas: [
          "Run large simulations or rendering jobs cheaply.",
          "Process big datasets in parallel using EC2 Spot."
        ]
      },
      {
        id: "ec2-spot",
        name: "EC2 Spot Instances",
        type: "Compute / Discounted",
        description: "Spare EC2 capacity at steep discounts, with possible interruptions.",
        bestFor: [
          "Fault-tolerant workloads",
          "Batch jobs and background processing"
        ],
        individualIdeas: [
          "Run non-urgent workloads at a fraction of the cost.",
          "Experiment with scaling strategies on the cheap."
        ]
      }
    ];

    // ---------- STATE ----------
    let currentMode = "turnkey"; // "turnkey" | "startup" | "service"
    let currentFilter = "all"; // NEW: Filter state
    let selectedPatternId = null;
    let selectedServiceId = null;

    const topModeToggle = document.getElementById("top-mode-toggle");
    const sidebarModeList = document.getElementById("sidebar-mode-list");
    const gridWrapper = document.getElementById("grid-wrapper");
    const gridTitle = document.getElementById("grid-title");
    const gridSubtitle = document.getElementById("grid-subtitle");
    const gridHint = document.getElementById("grid-hint");
    const cardGrid = document.getElementById("card-grid");
    const drawer = document.getElementById("drawer");
    const drawerTitle = document.getElementById("drawer-title");
    const drawerSubtitle = document.getElementById("drawer-subtitle");
    const drawerBody = document.getElementById("drawer-body");
    const drawerCloseBtn = document.getElementById("drawer-close-btn");

    // ---------- MODE SWITCHING ----------
    function setMode(mode) {
      currentMode = mode;
      selectedPatternId = null;
      selectedServiceId = null;
      updateModeButtons();
      renderSidebarModes();
      renderGrid();
      closeDrawer();
    }

    function updateModeButtons() {
      topModeToggle.querySelectorAll(".mode-btn").forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.mode === currentMode);
      });
    }

    topModeToggle.addEventListener("click", (e) => {
      const btn = e.target.closest(".mode-btn");
      if (!btn) return;
      setMode(btn.dataset.mode);
    });

    // ---------- SIDEBAR MODES ----------
    function renderSidebarModes() {
      const modes = [
        { id: "turnkey", label: "Turnkey", icon: "serverless" },
        { id: "startup", label: "Startup", icon: "compute" },
        { id: "service", label: "By Service", icon: "general" }
      ];
      sidebarModeList.innerHTML = modes
        .map(
          (m) => `
        <button class="sidebar-mode-btn ${m.id === currentMode ? "active" : ""}" data-mode="${m.id}">
          <span class="sidebar-icon">${Icons[m.icon]}</span>
          <span>${m.label}</span>
        </button>
      `
        )
        .join("");

      sidebarModeList.querySelectorAll(".sidebar-mode-btn").forEach((btn) => {
        btn.addEventListener("click", () => setMode(btn.dataset.mode));
      });
    }

    // ---------- NEW: FILTER LOGIC ----------
    function setupFilters() {
      const filterButtons = document.querySelectorAll(".sidebar-filter-pill");
      
      filterButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          // Update visual state
          filterButtons.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          
          // Set filter and re-render
          currentFilter = btn.dataset.filter;
          renderGrid();
        });
      });
    }

    // ---------- GRID RENDERING ----------
    function renderGrid() {
      if (currentMode === "turnkey") {
        gridTitle.textContent = "Move past Hello World!";
        gridSubtitle.textContent = "Build from scratch hassle-free deployment, these products leverage AWS-native workflows to get you up and running with minimal effort.";
        gridHint.textContent =
          "Pick what you want to do. Each card gives you one best path, not a menu of options.";
        renderTurnkeyGrid();
      } else if (currentMode === "startup") {
        gridTitle.textContent = "Startup-Ready Architectures";
        gridSubtitle.textContent = "Scalable patterns for SaaS, data, ML, and event-driven systems.";
        gridHint.textContent =
          "These patterns assume you care about growth, resilience, and long-term architecture.";
        renderStartupGrid();
      } else {
        gridTitle.textContent = "Explore by AWS Service";
        gridSubtitle.textContent = "See what each service is actually good for as an individual or founder.";
        gridHint.textContent =
          "Pick a service youâ€™ve heard of and see realistic ways to use it, plus where it appears in patterns.";
        renderServiceGrid();
      }
    }

    function renderTurnkeyGrid() {
      // Filter the list
      const filtered = patternsTurnkey.filter(p => {
        if (currentFilter === "all") return true;
        return p.icon === currentFilter;
      });

      cardGrid.innerHTML = filtered
        .map((p) => {
          const iconSvg = Icons[p.icon] || Icons.general;
          return `
          <article class="pattern-card ${p.id === selectedPatternId ? "active" : ""}" data-id="${p.id}" role="button" tabindex="0">
            <div class="pattern-header">
              <div class="pattern-icon">${iconSvg}</div>
              <div>
                <div class="pattern-name">${p.name}</div>
                <div class="pattern-tagline">${p.tagline}</div>
              </div>
            </div>
            <div class="pattern-meta-row">
              <span class="badge level">${p.level}</span>
              <span class="badge cost">${p.cost}</span>
              <span class="badge focus">${p.focus}</span>
            </div>
          </article>
        `;
        })
        .join("");

      cardGrid.querySelectorAll(".pattern-card").forEach((card) => {
        card.addEventListener("click", () => {
          const id = card.dataset.id;
          selectedPatternId = id;
          renderTurnkeyGrid();
          openTurnkeyDrawer(id);
        });
      });
    }

    function renderStartupGrid() {
      // Filter the list
      const filtered = patternsStartup.filter(p => {
        if (currentFilter === "all") return true;
        return p.icon === currentFilter;
      });

      cardGrid.innerHTML = filtered
        .map((p) => {
          const iconSvg = Icons[p.icon] || Icons.general;
          return `
          <article class="pattern-card ${p.id === selectedPatternId ? "active" : ""}" data-id="${p.id}" role="button" tabindex="0">
            <div class="pattern-header">
              <div class="pattern-icon">${iconSvg}</div>
              <div>
                <div class="pattern-name">${p.name}</div>
                <div class="pattern-tagline">${p.tagline}</div>
              </div>
            </div>
            <div class="pattern-meta-row">
              <span class="badge level">${p.level}</span>
              <span class="badge cost">${p.cost}</span>
              <span class="badge focus">${p.focus}</span>
            </div>
          </article>
        `;
        })
        .join("");

      cardGrid.querySelectorAll(".pattern-card").forEach((card) => {
        card.addEventListener("click", () => {
          const id = card.dataset.id;
          selectedPatternId = id;
          renderStartupGrid();
          openStartupDrawer(id);
        });
      });
    }

    function renderServiceGrid() {
      // Filter the list
      const normalizedFilter = currentFilter && currentFilter.toLowerCase();
const filtered = servicesCatalog.filter(s => {
  if (normalizedFilter === "all") return true;
  const typeTokens = s.type.toLowerCase().split(/[\s\/,]+/);
  const nameTokens = s.name.toLowerCase().split(/\s+/);
  return typeTokens.includes(normalizedFilter) || nameTokens.includes(normalizedFilter);
});

      cardGrid.innerHTML = filtered
        .map((s) => {
          const iconSvg =
            s.type.includes("Compute")
              ? Icons.compute
              : s.type.includes("Storage")
              ? Icons.storage
              : s.type.includes("Networking")
              ? Icons.networking
              : s.type.includes("Database")
              ? Icons.database
              : s.type.includes("Serverless")
              ? Icons.serverless
              : Icons.general;
          return `
          <article class="pattern-card ${s.id === selectedServiceId ? "active" : ""}" data-id="${s.id}" role="button" tabindex="0">
            <div class="pattern-header">
              <div class="pattern-icon">${iconSvg}</div>
              <div>
                <div class="pattern-name">${s.name}</div>
                <div class="pattern-tagline">${s.type}</div>
              </div>
            </div>
            <div class="pattern-meta-row">
              <span class="badge focus">Service</span>
            </div>
          </article>
        `;
        })
        .join("");

      cardGrid.querySelectorAll(".pattern-card").forEach((card) => {
        card.addEventListener("click", () => {
          const id = card.dataset.id;
          selectedServiceId = id;
          renderServiceGrid();
          openServiceDrawer(id);
        });
      });
    }

    // ---------- DRAWER ----------
    function openDrawer() {
      drawer.classList.add("open");
      // REMOVED: gridWrapper.style.marginRight = "var(--drawer-width)";
      // This caused the layout to break. Flexbox handles the resize automatically now.
    }

    function closeDrawer() {
      drawer.classList.remove("open");
      // REMOVED: gridWrapper.style.marginRight = "0";
      
      selectedPatternId = null;
      selectedServiceId = null;
      if (currentMode === "turnkey") renderTurnkeyGrid();
      else if (currentMode === "startup") renderStartupGrid();
      else renderServiceGrid();
    }

    drawerCloseBtn.addEventListener("click", closeDrawer);

    // Turnkey drawer
    function openTurnkeyDrawer(id) {
      const p = patternsTurnkey.find((x) => x.id === id);
      if (!p) return;
      drawerTitle.textContent = p.name;
      drawerSubtitle.textContent = "Turnkey AWS pattern";
      drawerBody.innerHTML = `
        <div class="drawer-section-title">Overview</div>
        <p class="drawer-text">${p.description}</p>

        <div class="drawer-section-title">Why this is the best turnkey path</div>
        <p class="drawer-text">${p.whyBest}</p>

        <div class="drawer-section-title">Services involved</div>
        <div class="service-chip-row">
          ${p.services
            .map(
              (s) => `
            <span class="service-chip">
              <span>${s.name}</span> â€“ ${s.role}
            </span>
          `
            )
            .join("")}
        </div>

        <div class="drawer-section-title">Cost & complexity</div>
        <p class="drawer-text"><strong>Cost profile:</strong> ${p.costNotes}</p>
        <p class="drawer-text"><strong>Complexity:</strong> ${p.complexityNotes}</p>

        <div class="drawer-section-title">Pattern summary</div>
        <div class="drawer-pill">
          <strong>Level:</strong> ${p.level}
        </div>
        <div class="drawer-pill">
          <strong>Focus:</strong> ${p.focus}
        </div>
      `;
      openDrawer();
    }

    // Startup drawer
    function openStartupDrawer(id) {
      const p = patternsStartup.find((x) => x.id === id);
      if (!p) return;
      drawerTitle.textContent = p.name;
      drawerSubtitle.textContent = "Startup-ready architecture";
      drawerBody.innerHTML = `
        <div class="drawer-section-title">Overview</div>
        <p class="drawer-text">${p.description}</p>

        <div class="drawer-section-title">Why this architecture</div>
        <p class="drawer-text">${p.whyBest}</p>

        <div class="drawer-section-title">Services involved</div>
        <div class="service-chip-row">
          ${p.services
            .map(
              (s) => `
            <span class="service-chip">
              <span>${s.name}</span> â€“ ${s.role}
            </span>
          `
            )
            .join("")}
        </div>

        <div class="drawer-section-title">Scaling & cost</div>
        <p class="drawer-text"><strong>Scaling notes:</strong> ${p.scalingNotes}</p>
        <p class="drawer-text"><strong>Cost considerations:</strong> ${p.costNotes}</p>

        <div class="drawer-section-title">Learning value</div>
        <p class="drawer-text">${p.learningValue}</p>

        <div class="drawer-section-title">Pattern summary</div>
        <div class="drawer-pill">
          <strong>Level:</strong> ${p.level}
        </div>
        <div class="drawer-pill">
          <strong>Focus:</strong> ${p.focus}
        </div>
      `;
      openDrawer();
    }

    // Service drawer
    function openServiceDrawer(id) {
      const svc = servicesCatalog.find((s) => s.id === id);
      if (!svc) return;

      const appearancesTurnkey = [];
      patternsTurnkey.forEach((p) => {
        if (p.services.some((s) => s.id === svc.id)) {
          appearancesTurnkey.push(p.name);
        }
      });

      const appearancesStartup = [];
      patternsStartup.forEach((p) => {
        if (p.services.some((s) => s.id === svc.id)) {
          appearancesStartup.push(p.name);
        }
      });

      drawerTitle.textContent = svc.name;
      drawerSubtitle.textContent = svc.type;

      drawerBody.innerHTML = `
        <div class="drawer-section-title">What this service is</div>
        <p class="drawer-text">${svc.description}</p>

        <div class="drawer-section-title">Best for</div>
        <ul class="drawer-list">
          ${svc.bestFor.map((b) => `<li>${b}</li>`).join("")}
        </ul>

        <div class="drawer-section-title">Practical ideas for one person</div>
        <ul class="drawer-list">
          ${svc.individualIdeas.map((i) => `<li>${i}</li>`).join("")}
        </ul>

        <div class="drawer-section-title">Where this appears in Turnkey patterns</div>
        ${
          appearancesTurnkey.length
            ? `<ul class="drawer-list">
                ${appearancesTurnkey.map((n) => `<li><span>${n}</span></li>`).join("")}
               </ul>`
            : `<p class="empty-state">Not wired into the curated Turnkey patterns yet, but still useful on its own.</p>`
        }

        <div class="drawer-section-title">Where this appears in Startup architectures</div>
        ${
          appearancesStartup.length
            ? `<ul class="drawer-list">
                ${appearancesStartup.map((n) => `<li><span>${n}</span></li>`).join("")}
               </ul>`
            : `<p class="empty-state">Not wired into the curated Startup patterns yet, but still valuable in advanced designs.</p>`
        }
      `;
      openDrawer();
    }

    // ---------- INIT ----------
    setupFilters(); // NEW: Initialize filters
    renderSidebarModes();
    renderGrid();
  </script>
</body>
</html>
